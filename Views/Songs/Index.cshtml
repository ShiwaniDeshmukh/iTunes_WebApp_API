@model iTunes_WebApp_API.Models.SearchResult

<h1>Search Results</h1>

@foreach (var item in Model.Results)
{
    <div>
        <p>Track Name: <a href="@item.ViewDetailsUrl" data-track-id="@item.trackId" class="track-link">@item.TrackName</a></p>
        <p>Artist: @item.ArtistName</p>
        <p>Click Count: <span id="click-count-@item.trackId">@item.ClickCount</span></p>
        <!-- Add other properties to display as needed -->
    </div>
}

@section scripts {
    <script>
        $(document).ready(function () {
            $('.track-link').on('click', function (e) {
                e.preventDefault();
                var trackId = $(this).data('track-id');
                var clickCountElement = $('#click-count-' + trackId);

                $.ajax({
                    url: '/Songs/TrackClick',
                    type: 'POST',
                    data: { trackId: trackId },
                    success: function () {
                        var clickCount = parseInt(clickCountElement.text()) + 1;
                        clickCountElement.text(clickCount);
                    }
                });
            });
        });
    </script>
}
